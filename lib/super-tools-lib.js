!function(e,t){e&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(self.document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).superToolsLib=t()}(this,(function(){"use strict";const e={initialToCapitali:e=>{const t=new RegExp("[A-Za-z]+"),n=e.substr(0,1);if(t.test(n))return`${n.toUpperCase()}${e.substr(1)}`;{const t=e.substr(-1);return`${e.substr(0,e.length-1)}${t.toUpperCase()}`}},repeat:(e,t)=>{let n="";for(;t;)t%2==1&&(n+=e),t>1&&(e+=e),t>>=1;return n},trim:e=>e.replace(/^\s+(.*?)\s+$/g,"$1")},t={guid:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),getFileBase64:(e,t)=>{if(!e)throw new Error('Error! no param "file"(getFileBase64()).');const n=new FileReader;n.onload=function(e){const n=e.target.result;t&&t(n)},n.onerror=function(){alert("Read file fail.")},n.readAsDataURL(e)},isAndroidMobileDevice:()=>/android/i.test(navigator.userAgent.toLowerCase()),isAppleMobileDevice:()=>/iphone|ipod|ipad|Macintosh/i.test(navigator.userAgent.toLowerCase()),throttle:function(e,t){let n=null;return function(){n||(n=setTimeout((()=>{e(),n=null}),t))}},debounce:function(e,t){let n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout((()=>{e(),n=null}),t)}},fileDownload:function(e){const t=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,n=navigator.userAgent.toLowerCase().indexOf("safari")>-1;if(t||n){const t=document.createElement("a");if(t.href=e,void 0!==t.download){const n=e.substring(e.lastIndexOf("/")+1,e.length);t.download=n}if(document.createEvent){const e=document.createEvent("MouseEvents");return e.initEvent("click",!0,!0),t.dispatchEvent(e),!0}}return-1===e.indexOf("?")&&(e+="?download"),window.open(e,"_self"),!0},fuzzyQuery:function(e,t,n){const o=[];for(let r=0;r<e.length;r++)null!==e[r][t].match(n)&&o.push(e[r]);return o},getUrlParam:function(){let e=document.location.toString().split("?");const t=Object.create(null);return e.length>1&&(e=e[1].split("&"),e.forEach((e=>{e=e.split("="),t[e[0]]=e[1]}))),t},getCookie:function(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):""},colorHex:e=>{const t=e,n=e.split(",");let o="#";for(let e=0;e<n.length;e++){let t=Number(n[e]).toString(16);t.length<2&&(t="0"+t),o+=t}return 7!==o.length&&(o=t),o},viewportToPixels:e=>{const t=e.match(/([0-9\.]+)(vh|vw)/),n=Number(t[1]);let o=0;return o="vw"===t[2]?window.innerWidth:window.innerHeight,o*(n/100)},noRefdelUrlParam:e=>{const t=window.location.href;if(-1==t.indexOf(e))return t;const n=t.split("?"),o=n[0],r=n[1].split("&");let i=-1;for(let t=0;t<r.length;t++){if(r[t].split("=")[0]==e){i=t;break}}return-1==i?t:(r.splice(i,1),window.history.pushState({},"0",o+"?"+r.join("&")),o+"?"+r.join("&"))}},n={toFullScreen:()=>{const e=document.documentElement,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){const e=new window.ActiveXObject("WScript.Shell");null!==e&&e.SendKeys("{F11}")}else alert("浏览器不支持全屏")},exitFullscreen:()=>{const e=parent.document,t=e.cancelFullScreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.exitFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){const e=new window.ActiveXObject("WScript.Shell");null!==e&&e.SendKeys("{F11}")}else alert("切换失败,可尝试Esc退出")},LocalStorage:{get:(e,t)=>(JSON.parse(localStorage.getItem(e))||{})[t]||"",set(e,t,n){if(!t)return;const o=JSON.parse(localStorage.getItem(e))||{};o[t]=n,localStorage.setItem(e,JSON.stringify(o))},remove(e,t){const n=JSON.parse(localStorage.getItem(e))||{};n[t]&&delete n[t],localStorage.setItem(e,JSON.stringify(n))},clear(){localStorage.clear()}},getPosition:(e=1e4,t=6e4)=>new Promise(((n,o)=>{if(!navigator&&!navigator.geolocation)return o(new Error("geolocation api not supported"));navigator.geolocation.getCurrentPosition((e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy};n(t)}),(()=>o("出错了")),{timeout:e,maximumAge:t})})),winCopy:e=>{["contextmenu","selectstart","copy"].forEach((function(t){document.addEventListener(t,(function(t){return t.returnValue=e}))}))},print:(e,t)=>{const n=document.createElement("IFRAME");let o=null;n.setAttribute("style","position:absolute;width:100%;height:100%;left:0;top:0;"),document.body.appendChild(n),o=n.contentWindow.document;const r=new Image;r.src=t,o.body.appendChild(r),o.close(),n.contentWindow.focus(),n.contentWindow.print(),navigator.userAgent.indexOf("MSIE")>0&&document.body.removeChild(n)},setVibration:()=>{window.navigator.vibrate([100,30,100,30,100,200,200,30,200,30,200,200,100,30,100,30,100])}},o={performanceAnalysis:()=>{const e=window.performance;setTimeout((function(){const t=e.timing;console.log("DNS查询耗时 ："+(t.domainLookupEnd-t.domainLookupStart).toFixed(0)),console.log("TCP链接耗时 ："+(t.connectEnd-t.connectStart).toFixed(0)),console.log("request请求耗时 ："+(t.responseEnd-t.responseStart).toFixed(0)),console.log("解析dom树耗时 ："+(t.domComplete-t.domInteractive).toFixed(0)),console.log("白屏时间 ："+(t.responseStart-t.navigationStart).toFixed(0)),console.log("domready时间 ："+(t.domContentLoadedEventEnd-t.navigationStart).toFixed(0)),console.log("onload时间 ："+(t.loadEventEnd-t.navigationStart).toFixed(0)),t==e.memory&&console.log("js内存使用占比 ："+(t.usedJSHeapSize/t.totalJSHeapSize*100).toFixed(2)+"%")}))}},r={getDistance:(e,t,n,o)=>{const r=Math.PI,i=r/180*o,s=r/180*t,a=r/180*n,l=r/180*e,c=6378.137*Math.acos(Math.sin(a)*Math.sin(l)+Math.cos(a)*Math.cos(l)*Math.cos(s-i));return parseInt(`${1e3*c}`,10)},lonLatToMercator:e=>{const t={x:0,y:0};return t.x=20037508.34*e.lon/180,t.y=Math.log(Math.tan((90+e.lat)*Math.PI/360))/(Math.PI/180),t.y=20037508.34*t.y/180,t},mercatorToLonlat:e=>{const t={lon:0,lat:0};return t.lon=e.x/20037508.34*180,t.lat=e.y/20037508.34*180,t.lat=180/Math.PI*(2*Math.atan(Math.exp(t.lat*Math.PI/180))-Math.PI/2),t}},i={mobile:/^(((13[0-9]{1})|(14[5,7,9]{1})|(15[0-3,5-9]{1})|(166)|(17[0-3,5-8]{1})|(18[0-9]{1})|(19[8,9]{1}))+\d{8})$|(^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$)/,website:/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*$/,nickname:/^[\u4E00-\u9FA5a-zA-Z0-9]{2,12}$/,verify_code:/^\d{6}$/,verify_pwd:/^([a-zA-Z0-9_*@#]{6,16})$/,email:/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/,character:/^.{0,254}$/,intNumber:/^[1-9]\d*$/,cP:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,cPattern:/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/,number:/^[0-9]+.{0,1}[0-9]{0,30}$/,numeric_letters:/^[0-9a-zA-Z]{0,40}$/g,chinese_numeric_letters:/^[a-zA-Z0-9\u4e00-\u9fa5]+$/};const s={validate:function(e,t){return new RegExp(i[`${e}`]).test(t)}},a={getOffset:function(e){let t=e.offsetLeft,n=e.offsetTop,o=e.offsetParent;for(;o&&"body"!==o.nodeName.toLowerCase();)t+=o.offsetLeft+o.clientLeft,n+=o.offsetTop+o.clientTop,o=o.offsetParent;return{left:t,top:n}},shaking:({ele:e,attr:t,cb:n,rate:o=20,time:r=50})=>{const i=parseInt(function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle(e)[t]}(e,t)),s=[];let a=null,l=0;for(let e=o;e>0;e-=2)s.push(e,-e);s.push(0),clearInterval(a),a=setInterval((function(){e.style[t]=i+s[l]+"px",l++,l===s.length&&(clearInterval(a),n&&n())}),r)}},l={arrayUnique:e=>Array.from(new Set(e)),arrayNonRepeatfy:e=>{const t=new Map,n=[];for(let o=0;o<e.length;o++)t.has(e[o])?t.set(e[o],!0):(t.set(e[o],!1),n.push(e[o]));return n},aLineUnique:e=>[...new Set(e)]},c={repeat:e=>{Object.values(e).length!==new Set(Object.values(e)).size?console.log("重复"):console.log("no")}},u={isBase64:e=>/data:image\/.+;base64,/.test(e),isArray:e=>Array.isArray(e),isString:e=>"string"==typeof e,isFunction:e=>!(!e||"function"!=typeof e),isObject:e=>"[object Object]"===Object.prototype.toString.call(e),isNumber:e=>!isNaN(e)&&"number"==typeof e,isWeiXin:()=>-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger")},d={downBlob:(e,t)=>{const n=window.URL.createObjectURL(new Blob([e])),o=document.createElement("a");o.style.display="none",o.href=n,o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}};class h{constructor(e){const{url:t,reconnectCount:n,heartTime:o}=e;this.ws=null,this.url=t,this.sendTimer=null,this.heartTimer=null,this.reconnectCount=n||3e3,this.heartTime=o||5e3}createWebSocket(e,t){this.ws=new WebSocket(this.url),e=JSON.stringify(e),this.ws.onopen=()=>{this.sendTimer=setInterval((()=>{this.ws.send(e)}),1e3),this.heartbeat(e,t),console.log("ws连接成功!"+(new Date).toLocaleString())},this.ws.onclose=e=>{console.log("关闭ws",e),this.ws.close()},this.ws.onmessage=n=>{this.heartbeat(e,t);const o=JSON.parse(n.data);t&&"function"==typeof t&&t(o)},this.ws.onerror=n=>{console.log("error:"+n),this.heartbeat(e,t)}}heartbeat(e,t){clearInterval(this.heartTimer),this.heartTimer=setInterval((()=>{0!==this.reconnectCount?(this.ws.close(),clearInterval(this.sendTimer),this.createWebSocket(e,t),--this.reconnectCount):clearInterval(this.heartTimer)}),this.heartTime)}}return{version:"1.0.7",...s,...e,...t,...n,...o,...r,...a,...l,...c,...u,...d,...{socket:({url:e})=>new h({url:e})}}}));
